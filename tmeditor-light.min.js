function UID(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function __TMEditor(){this.tpl='<div class="tmeditor" id="{{ID}}">\n<div class="toolbar">\n<div class="set">\n<icon tool="bold">format_bold</icon>\n<icon tool="italic">format_italic</icon>\n</div>\n<icon tool="image">insert_photo</icon>\n<icon tool="link">insert_link</icon>\n<icon tool="quote">format_quote</icon>\n<div class="list">\n<icon tool="code">code</icon>\n<ul id="codes_list">\n<li lang="code">Code</li>\n<li lang="javascript">JavaScript</li>\n<li lang="html">HTML</li>\n<li lang="php">PHP</li>\n<li lang="ruby">Ruby</li>\n<li lang="java">Java</li>\n<li lang="perl">Perl</li>\n<li lang="python">Python</li>\n<li lang="bash">Bash</li>\n<li lang="cs">C#</li>\n<li lang="cpp">C++</li>\n<li lang="css">CSS</li>\n<li lang="diff">Diff</li>\n<li lang="xml">XML</li>\n<li lang="sql">SQL</li>\n<li lang="1c">1C</li>\n<li lang="actionscript">ActionScript</li>\n<li lang="apache">Apache</li>\n<li lang="axapta">Axapta</li>\n<li lang="cmake">CMake</li>\n<li lang="coffeescript">CoffeeScript</li>\n<li lang="dos">DOS</li>\n<li lang="delphi">Delphi</li>\n<li lang="django">Django</li>\n<li lang="erlang">Erlang</li>\n<li lang="erlang_repl">Erlang REPL</li>\n<li lang="go">Go</li>\n<li lang="haskell">Haskell</li>\n<li lang="lisp">Lisp</li>\n<li lang="lua">Lua</li>\n<li lang="mel">MEL</li>\n<li lang="markdown">Markdown</li>\n<li lang="matlab">Matlab</li>\n<li lang="nginx">Nginx</li>\n<li lang="objectivec">Objective C</li>\n<li lang="rust">Rust</li>\n<li lang="scala">Scala</li>\n<li lang="smalltalk">Smalltalk</li>\n<li lang="tex">TeX</li>\n<li lang="vbscript">VBScript</li>\n<li lang="vhdl">VHDL</li>\n<li lang="vala">Vala</li>\n</ul>\n</div>\n\n</div>\n<div class="body">\n<textarea></textarea>\n</div>\n</div>';this.editor=false;this.id=false;this.width="600px";this.height="350px";this.highlight=false}__TMEditor.prototype.init=function(f){var c=$(f.selector),d=c.text(),b=f.width||this.width,a=f.height||this.height;this.id=UID();var e=this.tpl.replace(/{{ID}}/ig,this.id);c.replaceWith(e);this.editor=$("#"+this.id);this.editor.css("width",b).css("height",a);this.textarea=$("#"+this.id).find("textarea");this.textarea.text(d)};__TMEditor.prototype.codes=function(){var a=TMEditor.editor.find("#codes_list");if(a.is("[opened]")){a.animate({height:"0px",width:"0px"},400);a.removeAttr("opened")}else{a.animate({height:"250px",width:"200px"},400);a.attr("opened",true)}};var TMEditor=new __TMEditor;$("body").on("click",".tmeditor icon[tool]",function(){var c=$(this).attr("tool"),a=TMEditor.textarea.val().length,f=TMEditor.textarea[0].selectionStart,b=TMEditor.textarea[0].selectionEnd,d=TMEditor.textarea.val().substring(f,b);replace="";switch(c){case"bold":replace="<b>"+d+"</b>";break;case"italic":replace="<i>"+d+"</i>";break;case"quote":replace="<blockquote>"+d+"</blockquote>";break;case"link":var e=window.prompt("Insert Link","http://");if(d==""){d="Link"}if(e==null){return false}replace='<a href="'+e+'">'+d+"</a>";break;case"image":var e=window.prompt("Insert image link","http://");if(e==null){return false}replace='<img src="'+e+'" alt="'+d+'"> '+d;break;case"code":TMEditor.codes();return false;break}TMEditor.textarea.val(TMEditor.textarea.val().substring(0,f)+replace+TMEditor.textarea.val().substring(b,a))});$("body").on("click",".tmeditor li[lang]",function(){var d=$(this).attr("lang"),a=TMEditor.textarea.val().length,e=TMEditor.textarea[0].selectionStart,b=TMEditor.textarea[0].selectionEnd,c=TMEditor.textarea.val().substring(e,b);replace="";if(TMEditor.highlight){replace='<pre class="'+highlight+" lang-"+d+'">'+c+"</pre>"}else{replace='<pre lang="'+d+'">'+c+"</pre>"}TMEditor.textarea.val(TMEditor.textarea.val().substring(0,e)+replace+TMEditor.textarea.val().substring(b,a));TMEditor.codes();return false});$(document).mouseup(function(b){if(TMEditor.editor.find("#codes_list").is("[opened]")){var a=TMEditor.editor.find("#codes_list");if(a.has(b.target).length===0&&a[0].outerHTML!=b.target.outerHTML){TMEditor.codes()}}});