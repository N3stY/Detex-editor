(function(){var b,a;a=function(){};a.prototype.uniqueID=function(){var c;c=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()};a.prototype.init=function(e){var d,c;this.version=c="2.0 L";this.params=e;this.textarea=$(e.selector);this.title=e.title||"TMEditor "+c;this.setUI("");d=$(e.selector);$(window).mouseup(function(f){b(f)});$(d).mouseup(function(f){b(f)});$("[data-weight]").click(function(){var g,f,h,i,k,j;j=$(this).attr("data-weight");f=d.val().length;k=d[0].selectionStart;g=d[0].selectionEnd;i=d.val().substring(k,g);h='<span style="font-weight:'+j+'">'+i+"</span>";d.val(d.val().substring(0,k)+h+d.val().substring(g,f))});$("[data-size]").click(function(){var g,f,h,i,k,j;j=$(this).attr("data-size");f=d.val().length;k=d[0].selectionStart;g=d[0].selectionEnd;i=d.val().substring(k,g);h='<span style="font-size:'+j+'">'+i+"</span>";d.val(d.val().substring(0,k)+h+d.val().substring(g,f))});$("[data-lang]").click(function(){var g,f,h,i,k,j;j=$(this).attr("data-lang");f=d.val().length;k=d[0].selectionStart;g=d[0].selectionEnd;i=d.val().substring(k,g);h='<pre><code class="'+j+'">'+i+"</code></pre>";d.val(d.val().substring(0,k)+h+d.val().substring(g,f))});$("[data-color]").click(function(){var g,f,h,i,k,j;j=$(this).attr("data-color");f=d.val().length;k=d[0].selectionStart;g=d[0].selectionEnd;i=d.val().substring(k,g);h='<span style="color:'+j+'">'+i+"</span>";d.val(d.val().substring(0,k)+h+d.val().substring(g,f))});$("[data-insert]").click(function(){var g,f,j,h,i,l,k;k=$(this).attr("data-insert");f=d.val().length;l=d[0].selectionStart;g=d[0].selectionEnd;i=d.val().substring(l,g);if(k==="blockquote"){h="<blockquote>"+i+"</blockquote>"}if(k==="image"){j=window.prompt("Insert image link","http://");if(j){h='<img src="'+j+'">'+i}}if(k==="link"){j=window.prompt("Insert Link","http://");if(j){h='<a href="'+j+'">'+i+"</a>"}}d.val(d.val().substring(0,l)+h+d.val().substring(g,f))});$("[data-align]").click(function(){var g,f,h,i,k,j;j=$(this).attr("data-align");f=d.val().length;k=d[0].selectionStart;g=d[0].selectionEnd;i=d.val().substring(k,g);h='<div style="text-align:'+j+'">'+i+"</div>";d.val(d.val().substring(0,k)+h+d.val().substring(g,f))})};a.prototype.setUI=function(){var g,d,f,e,h,c;h=this.params.skin||tm_default_template;h=h.replace(/{{tm-title}}/g,this.title);c=this.textarea[0].outerHTML;d='<div class="tmeditor" style="width: 900px;" id="'+this.uniqueID()+'">'+h+'<div class="tm-editor">'+c+"</div> </div>";this.textarea.replaceWith(d);g=$('[data-action="tm-dropdown"]');f=0;e=[];while(f<g.length){g[f].addEventListener("click",(function(){$(this).toggleClass("open")}),false);e.push(f++)}return e};b=function(h){var g,f,d,c;g=$(".tm-dropdown-container");f=0;d=[];while(f<g.length){c=$(g[f]).parent("div");if(c.hasClass("open")){if(c.find($(h.target)).length!==1){c.removeClass("open")}}d.push(f++)}return d};window.TMELight=new a}).call(this);